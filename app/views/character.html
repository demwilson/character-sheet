<div ng-repeat="c in characters">
	<section id="info">
		<h2>
			<e d="c.info.name"></e>&#32;
			<small>
				CR&#32;<e d="c.info.cr"></e>
			</small>
		</h2>
		<hr>
		<p>
			<e d="c.info.race">&#32;</e>
			<e d="c.info.classes">&#32;</e>
			<e d="c.info.alignment">&#32;</e>
			<e d="c.info.size">&#32;</e>
			<e d="c.info.type">&#32;</e>
			<span ng-if="c.info.subtypes">
				(
				<e ng-repeat="subtype in c.info.subtypes" d="subtype">
					<span ng-if="!$last">,&#32;</span>
				</e>
				)
			</span>
		</p>
		<p>
			<b>Initiative</b>
			&#32;<roll name="'Initiative'" die="prependToString('1d20', c.info.initiative)"></roll>;
			<span ng-if="c.info.senses">
				<b>Senses</b>&#32;
				<e ng-repeat="sense in c.info.senses" d="sense">
					<span ng-if="!$last">,&#32;</span>
				</e>;
			</span>
			<b>Perception</b>&#32;
			<roll name="c.perception.name" die="c.perception.roll()"></roll>
		</p>
		<hr>
	</section>
	<section id="defense">
		<p>
			<b>AC</b>
			{{c.defense.ac.total()}},
			<b>touch</b>
			{{c.defense.ac.touch()}},
			<b>flat-footed</b>
			{{c.defense.ac.flatfooted()}}
			({{c.defense.ac.toString()}})
		</p>
		<p>
			<b>CMD</b>
			{{c.defense.cmd.total()}},
			<b>flat-footed</b>
			{{c.defense.cmd.flatfooted()}}
			({{c.defense.cmd.toString()}})
		</p>
		<p>
			<b>HP</b>
			{{c.info.hp}}
			({{c.info.hd}})
		</p>
		<p>
			<b>Fortitude</b>
			&#32;<roll name="'Fortitude Save'" die="c.defense.fort.roll()"></roll>;
			<b>Reflex</b>
			&#32;<roll name="'Reflex Save'" die="c.defense.refl.roll()"></roll>;
			<b>Will</b>
			&#32;<roll name="'Will Save'" die="c.defense.will.roll()"></roll>
		</p>
		<p>
			<span ng-if="c.defense.dr">
				<b>DR</b>
				{{c.defense.dr}}<span ng-if="c.defense.immune || c.defense.resist || c.defense.sr">;&#32;</span>
			</span>
			<span ng-if="c.defense.immune">
				<b>Immune</b>&#32;
				<e ng-repeat="im in c.defense.immune" d="im">
					<span ng-if="!$last">,&#32;</span>
				</e>
				<span ng-if="c.defense.resist || c.defense.sr">;&#32;</span>
			</span>
			<span ng-if="c.defense.resist">
				<b>Resist</b>
				{{c.defense.resist}}
				<span ng-if="c.defense.sr">;&#32;</span>
			</span>
			<span ng-if="c.defense.sr">
				<b>SR</b>
				{{c.defense.sr}}
			</span>
		</p>
		<p id="special" ng-if="c.defense.special">
			<b>Special</b>
			<span ng-repeat="def in c.defense.special">
				{{def.name}} {{def.times}}<span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<hr>
	</section>
	<section id="offense">
		<p ng-repeat="(type, attacks) in c.offense.attacks">
			<b>{{type.toProperCase()}}</b>
			<span ng-repeat="attack in attacks | orderBy:'name'">
				<attack data="attack"></attack><span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<div id="slas" ng-if="c.offense.slas" ng-repeat="caster in c.offense.slas | orderBy:'name'">
			<p>
				<b>
					{{caster.name}}
					Spell-Like Abilities
				</b>
				(CL
				{{caster.casterLevel.toOrdinal()}};
				concentration
				&#32;<roll name="'Concentration'" die="prependToString('1d20', caster.concentration())"></roll>)
			</p>
			<div class="spellList">
				<table>
					<tr ng-repeat="sla in caster.list">
						<td>{{sla.times}}</td>
						<td class="separator">-</td>
						<td>
							<span ng-repeat="t in caster.textFix($index) track by $index"><spell ng-if="t.indexOf('spell:') >= 0" name="t.replace('spell:', '')"></spell><span ng-if="t.indexOf('spell:') == -1">{{t}}</span></span>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<div id="spells" ng-if="c.offense.spells" ng-repeat="caster in c.offense.spells | orderBy:'class'">
			<p>
				<b>
					{{caster.class}}
					Spells
					{{caster.type}}
				</b>
				(CL
				{{caster.casterLevel.toOrdinal()}};
				concentration
				&#32;<roll name="'Concentration'" die="prependToString('1d20', caster.concentration())"></roll>)
			</p>
			<div class="spellList">
				<table>
					<tr ng-repeat="(level, spells) in caster.list">
						<td>{{(caster.list.length - 1 - level).toOrdinal()}}</td>
						<td class="per-day" ng-if="caster.perDay">({{caster.perDay[$index]}})</td>
						<td class="separator">-</td>
						<td>
							<span ng-repeat="spell in spells">
								<spell name="spell"></spell><span ng-if="!$last">,</span>
							</span>
						</td>
					</tr>
				</table>
				<p>
					<b>{{caster.otherText.heading}}</b>
					{{caster.otherText.text}}
				</p>
			</div>
		</div>
		<p>
			<b>Speed</b>
			{{c.offense.speed}}
		</p>
		<p>
			<b>Space</b>
			{{c.offense.space}};
			<b>Reach</b>
			{{c.offense.reach}}
		</p>
		<hr>
	</section>
	<section id="statistics">
		<p id="ability-scores">
			<span ng-repeat="ability in c.statistics.abilities | orderAbilityScores">
				<b>{{ability.sname}}</b>
				{{ability.score()}}
				&#32;<roll name="ability.name" die="ability.roll()"></roll><span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<p id="skills" ng-if="c.hasTrainedSkills()">
			<b>Trained Skills</b>
			<span class="block" ng-repeat="skill in c.skills | filterSkills:'trained' | orderObjectBy:'name'">
				<i ng-class="skill.icon()"></i>
				{{skill.name}}
				&#32;<roll name="skill.name" die="skill.roll()" validation="skill.validation"></roll><span ng-if="!$last">,</span>
			</span>
		</p>
		<p id="untrained-skills" ng-if="c.hasUntrainedSkills()">
			<b>Untrained Skills</b>
			<span class="block" ng-repeat="skill in c.skills | filterSkills | orderObjectBy:'name'">
				<i ng-class="skill.icon()"></i>
				{{skill.name}}
				&#32;<roll name="skill.name" die="skill.roll()" validation="skill.validation"></roll><span ng-if="!$last">,</span>
			</span>
		</p>
		<p id="feats" ng-if="c.statistics.feats">
			<b>Feats</b>
			<span ng-repeat="feat in c.statistics.feats">
				<feat name="feat"></feat><span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<p id="traits" ng-if="c.statistics.traits">
			<b>Traits</b>
			<span ng-repeat="trait in c.statistics.traits">
				<nethys type="Trait" item="trait" ng-class="classes">
					{{trait.split(' (')[0].split('||')[0]}}<span ng-if="trait.split(' (')[1].slice(0, 1)">({{trait.split(' (')[1].slice(0, 1)}})</span>
				</nethys><span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<p ng-if="c.equipment.combat">
			<b>Combat Gear</b> &#32;
			<span ng-repeat="item in c.equipment.combat">
				{{item}}<span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<p ng-if="c.equipment.other">
			<b>Other Gear</b> &#32;
			<span ng-repeat="item in c.equipment.other">
				{{item}}<span ng-if="!$last">,&#32;</span>
			</span>
		</p>
		<p ng-if="c.equipment.cash"><b>Cash</b> {{c.equipment.cash}} gp.</p>
		<hr>
	</section>
</div>